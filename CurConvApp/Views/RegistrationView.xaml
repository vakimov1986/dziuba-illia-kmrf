<UserControl x:Class="CurConvApp.Views.RegistrationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:CurConvApp.ViewModels"
             xmlns:services="clr-namespace:CurConvApp.Services">
    <UserControl.Resources>
        <Style x:Key="ValidatedTextBox" TargetType="TextBox">
            <Setter Property="Margin" Value="0 0 0 15"/>
            <Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <StackPanel>
                            <AdornedElementPlaceholder />
                            <TextBlock Foreground="Red"
                               FontSize="12"
                               Margin="4,2,0,0"
                               Text="{Binding Path=AdornedElement.(Validation.Errors)[0].ErrorContent,
                                              RelativeSource={RelativeSource AncestorType=Adorner}}" />
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="True">
                    <Setter Property="BorderBrush" Value="Red"/>
                    <Setter Property="BorderThickness" Value="1"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <StackPanel Margin="20" VerticalAlignment="Center" HorizontalAlignment="Center" Width="300">
        <TextBlock Text="Реєстрація користувача" FontSize="20" FontWeight="Bold" TextAlignment="Center" />

        <TextBlock Text="Ім’я"/>
        <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"  Style="{StaticResource ValidatedTextBox}" services:PlaceholderService.Placeholder="Введіть ім’я"/>

        <TextBlock Text="Прізвище"/>
        <TextBox Text="{Binding Surname, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource ValidatedTextBox}" />

        <TextBlock Text="Email"/>
        <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource ValidatedTextBox}" />

        <TextBlock Text="Пароль" />
        <PasswordBox x:Name="PasswordBox" Margin="0,0,0,20" PasswordChanged="PasswordBox_PasswordChanged"/>

        <TextBlock Text="{Binding Message}" Foreground="Red" Margin="0,0,0,10"/>

        <Button Content="Зареєструватися" Command="{Binding RegisterCommand}" Width="150" Margin="0,0,0,20"/>
        <Button Content="Назад до входу" Command="{Binding GoToLoginCommand}" Width="150"/>
    </StackPanel>
</UserControl>
